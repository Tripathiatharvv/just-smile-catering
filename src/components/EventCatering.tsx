"use client";import { useRef, useState, useEffect } from "react";import { motion, useInView, useScroll, useTransform } from "framer-motion";import {  ChefHat,  Crown,  Sparkles,  Check,  ArrowRight,} from "lucide-react";import { getCloudinaryUrl, getCloudinaryVideoUrl } from "@/lib/cloudinary";interface GalleryItem {  id: string;  type: "image" | "video";  src: string;  alt: string;  span?: "tall" | "wide" | "normal";}const galleryItems: GalleryItem[] = [  {    id: "1",    type: "video",    src: "https://res.cloudinary.com/dl4mlw1dl/video/upload/v1769014207/upscaled-video_fymv3r.mp4",    alt: "Grand Event Highlights",    span: "wide",  },  {    id: "2",    type: "image",    src: "https://res.cloudinary.com/dl4mlw1dl/image/upload/v1769014205/WhatsApp_Image_2026-01-20_at_2.07.05_PM_o0qsyn.jpg",    alt: "Luxury Ice Bar with Artisan Cocktails",    span: "normal",  },  {    id: "3",    type: "video",    src: "https://res.cloudinary.com/dl4mlw1dl/video/upload/v1769014204/WhatsApp_Video_2026-01-20_at_2.07.04_PM_ic3lvd.mp4",    alt: "Live Event Experience",    span: "normal",  },  {    id: "4",    type: "image",    src: "https://res.cloudinary.com/dl4mlw1dl/image/upload/v1769014204/WhatsApp_Image_2026-01-20_at_2.07.07_PM_lp0atm.jpg",    alt: "Elegant Event Setup",    span: "normal",  },  {    id: "5",    type: "image",    src: "https://res.cloudinary.com/dl4mlw1dl/image/upload/v1769014203/WhatsApp_Image_2026-01-20_at_2.07.07_PM_1_mqujqx.jpg",    alt: "Premium Catering Presentation",    span: "normal",  },  {    id: "6",    type: "image",    src: "https://res.cloudinary.com/dl4mlw1dl/image/upload/v1769014491/50426210-450e-44b7-880b-1fe8d9985bf5_h312ng.jpg",    alt: "Exquisite Event Display",    span: "wide",  },];const cateringServices = [  {    title: "Private Event Catering",    subtitle: "Tailored Culinary Excellence",    icon: ChefHat,    description: "Our master chefs specialize in crafting personalized dining experiences. From intimate home dinners to elite corporate gatherings, we customize every menu to your exact requirements, ensuring a feast that perfectly mirrors your taste and vision.",    features: [      "Fully Customizable Menus",      "Multiple Cuisine Varieties",      "Experienced Gourmet Chefs",      "Delicious, Authentic Taste"    ],    image: "https://images.unsplash.com/photo-1555244162-803834f70033?auto=format&fit=crop&q=80&w=800"  },  {    title: "Grand Wedding Catering",    subtitle: "A Masterpiece of Flavors",    icon: Crown,    description: "Celebrate your big day with a culinary journey led by our experienced chefs. We offer a vast variety of global cuisines, prepared with premium ingredients and a passion for delicious taste that will leave your guests enchanted.",    features: [      "Bespoke Wedding Menus",      "Global Multi-Cuisine Selection",      "Master Culinary Experts",      "Flawless Presentation"    ],    image: "https://images.unsplash.com/photo-1519225421980-715cb0215aed?auto=format&fit=crop&q=80&w=800"  },  {    title: "Milestones & Celebrations",    subtitle: "Professional Gourmet Service",    icon: Sparkles,    description: "Make every anniversary and celebration unforgettable. Our chefs bring years of expertise to your table, offering multiple cuisine options and customizable packages designed to meet the unique needs of your special event.",    features: [      "Flexible Requirement Planning",      "Diverse International Menu",      "Chef-Crafted Delicacies",      "Tailored Guest Experiences"    ],    image: "https://images.unsplash.com/photo-1464349153735-7db50ed83c84?auto=format&fit=crop&q=80&w=800"  }];function LazyVideo({ src, className }: { src: string, className?: string }) {  const videoRef = useRef<HTMLVideoElement>(null);  const [isInView, setIsInView] = useState(false);  useEffect(() => {    const observer = new IntersectionObserver(      (entries) => {        if (entries[0].isIntersecting) {          setIsInView(true);          observer.disconnect();        }      },      { threshold: 0.1 }    );    if (videoRef.current) {      observer.observe(videoRef.current);    }    return () => observer.disconnect();  }, []);  const optimizedSrc = getCloudinaryVideoUrl(src, { quality: "auto" });  return (    <video      ref={videoRef}      src={isInView ? optimizedSrc : ""}      muted      loop      playsInline      autoPlay      className={className}    />  );}export function EventCatering() {  const ref = useRef<HTMLDivElement>(null);  const isInView = useInView(ref, { once: true, margin: "-100px" });  const { scrollYProgress } = useScroll({    target: ref,    offset: ["start end", "end start"],  });  const bgY = useTransform(scrollYProgress, [0, 1], [0, -80]);  return (    <section id="event-catering" className="py-20 bg-white relative overflow-hidden">      <motion.div        style={{ y: bgY }}        className="absolute inset-0 pointer-events-none"      >        <div className="absolute top-0 left-1/4 w-[600px] h-[600px] bg-gradient-to-br from-[#D4A24C]/5 to-transparent rounded-full blur-3xl" />        <div className="absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-gradient-to-br from-[#5A1F1F]/5 to-transparent rounded-full blur-3xl" />      </motion.div>      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">        <motion.div          ref={ref}          initial={{ opacity: 0, y: 40 }}          animate={isInView ? { opacity: 1, y: 0 } : {}}          transition={{ duration: 0.8 }}          className="text-center mb-16"        >          <div className="flex items-center justify-center gap-3 mb-4">            <motion.div              className="w-12 h-[2px] bg-gradient-to-r from-[#D4A24C] to-[#E6B65C]"              initial={{ width: 0 }}              animate={isInView ? { width: 48 } : {}}              transition={{ duration: 0.8, delay: 0.2 }}            />            <span className="font-sans text-sm font-semibold tracking-widest text-[#5A1F1F] uppercase flex items-center gap-2">              <Sparkles size={14} className="text-[#D4A24C]" />              Specialized Services            </span>            <motion.div              className="w-12 h-[2px] bg-gradient-to-r from-[#E6B65C] to-[#D4A24C]"              initial={{ width: 0 }}              animate={isInView ? { width: 48 } : {}}              transition={{ duration: 0.8, delay: 0.2 }}            />          </div>          <h2 className="font-serif text-4xl sm:text-5xl text-[#1a1a1a] mb-4">            Event <span className="text-gradient italic">Catering</span>          </h2>          <p className="font-sans text-base text-gray-600 max-w-2xl mx-auto">            From intimate private dinners to grand wedding celebrations, we bring our culinary excellence to your most precious moments.          </p>        </motion.div>        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">          {cateringServices.map((service, index) => (            <motion.div              key={service.title}              initial={{ opacity: 0, y: 30 }}              whileInView={{ opacity: 1, y: 0 }}              viewport={{ once: true }}              transition={{ duration: 0.7, delay: index * 0.2 }}              className="group relative h-[600px] rounded-[2rem] overflow-hidden shadow-xl"            >              {}              <div className="absolute inset-0 z-0 overflow-hidden">                <motion.img                  src={getCloudinaryUrl(service.image, { width: 800, quality: "auto", format: "auto" })}                  alt={service.title}                  className="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110"                />                <div className="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent opacity-90 transition-opacity duration-500" />                {}                <div className="absolute inset-0 bg-[#D4A24C] mix-blend-overlay opacity-0 group-hover:opacity-20 transition-opacity duration-700" />              </div>              {}              <div className="absolute inset-0 z-10 p-8 flex flex-col justify-end">                {}                <div className="w-12 h-1 bg-[#D4A24C] mb-6 transform origin-left transition-all duration-500 group-hover:w-24" />                {}                <span className="font-sans text-[#D4A24C] text-xs font-bold tracking-[0.2em] uppercase mb-3 flex items-center gap-2">                  <service.icon size={14} />                  {service.subtitle}                </span>                {}                <h3 className="font-serif text-3xl text-white mb-4 leading-tight group-hover:text-[#fff] transition-colors duration-300">                  {service.title}                </h3>                {}                <p className="font-sans text-gray-300 text-sm leading-relaxed mb-6 opacity-80 group-hover:opacity-100 transition-opacity duration-500">                  {service.description}                </p>                {}                <div className="max-h-0 overflow-hidden group-hover:max-h-[300px] transition-all duration-700 ease-in-out">                  <ul className="space-y-3 pb-4 border-t border-white/10 pt-4">                    {service.features.map((feature) => (                      <li key={feature} className="flex items-center gap-3 text-white/90 text-sm font-medium">                        <span className="w-5 h-5 rounded-full bg-[#D4A24C]/20 flex items-center justify-center border border-[#D4A24C]/30 text-[#D4A24C]">                          <Check size={10} />                        </span>                        {feature}                      </li>                    ))}                  </ul>                </div>                {}                <div className="mt-4 flex items-center gap-2 text-[#D4A24C] font-semibold text-sm cursor-pointer group/btn">                  <span>Learn More</span>                  <ArrowRight size={16} className="transition-transform group-hover/btn:translate-x-1" />                </div>              </div>            </motion.div>          ))}        </div>        <motion.div          initial={{ opacity: 0, y: 40 }}          whileInView={{ opacity: 1, y: 0 }}          viewport={{ once: true }}          transition={{ duration: 0.8 }}          className="mt-24"        >          <div className="text-center mb-12">            <div className="flex items-center justify-center gap-3 mb-4">              <motion.div                className="w-12 h-[2px] bg-gradient-to-r from-[#D4A24C] to-[#E6B65C]"                initial={{ width: 0 }}                whileInView={{ width: 48 }}                viewport={{ once: true }}                transition={{ duration: 0.8 }}              />              <span className="font-sans text-sm font-semibold tracking-widest text-[#5A1F1F] uppercase flex items-center gap-2">                <Sparkles size={14} className="text-[#D4A24C]" />                Memorable Moments              </span>              <motion.div                className="w-12 h-[2px] bg-gradient-to-r from-[#E6B65C] to-[#D4A24C]"                initial={{ width: 0 }}                whileInView={{ width: 48 }}                viewport={{ once: true }}                transition={{ duration: 0.8 }}              />            </div>            <h2 className="font-serif text-3xl sm:text-4xl text-[#1a1a1a] mb-3">              Events <span className="text-gradient italic">Showcase</span>            </h2>            <p className="font-sans text-base text-gray-600 max-w-2xl mx-auto">              Capturing the magic of our grand celebrations â€” from stunning ice bars to live food stations that bring your events to life            </p>          </div>          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">            {galleryItems.map((item, index) => (              <motion.div                key={item.id}                initial={{ opacity: 0, y: 20 }}                whileInView={{ opacity: 1, y: 0 }}                viewport={{ once: true }}                transition={{ duration: 0.5, delay: index * 0.1 }}                className={`relative group overflow-hidden rounded-[2rem] shadow-xl hover:shadow-2xl transition-all duration-500 border border-[#5A1F1F]/5 ${item.span === "wide" ? "md:col-span-2" : ""                  } aspect-[4/3] md:aspect-auto md:h-[400px]`}              >                {item.type === "image" ? (                  <img                    src={getCloudinaryUrl(item.src, { width: 800, quality: "auto", format: "auto" })}                    alt={item.alt}                    className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"                  />                ) : (                  <LazyVideo                    src={item.src}                    className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"                  />                )}                <div className="absolute inset-0 bg-gradient-to-t from-[#5A1F1F]/80 via-[#5A1F1F]/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500" />                <div className="absolute bottom-0 left-0 right-0 p-8 transform translate-y-4 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-500">                  <p className="text-[#D4A24C] text-xs font-bold tracking-widest uppercase mb-2">Event Gallery</p>                  <p className="text-white text-lg font-serif italic">{item.alt}</p>                </div>              </motion.div>            ))}          </div>        </motion.div>        <motion.div          initial={{ opacity: 0, y: 40 }}          whileInView={{ opacity: 1, y: 0 }}          viewport={{ once: true }}          transition={{ duration: 0.8 }}          className="mt-20 relative overflow-hidden rounded-3xl"        >          <div className="absolute inset-0 bg-gradient-to-r from-[#5A1F1F] to-[#5a252c]" />          <div className="absolute inset-0 overflow-hidden">            <motion.div              animate={{ rotate: 360 }}              transition={{ duration: 30, repeat: Infinity, ease: "linear" }}              className="absolute -top-20 -right-20 w-60 h-60 bg-[#D4A24C]/10 rounded-full"            />            <motion.div              animate={{ rotate: -360 }}              transition={{ duration: 25, repeat: Infinity, ease: "linear" }}              className="absolute -bottom-20 -left-20 w-80 h-80 bg-[#D4A24C]/10 rounded-full"            />          </div>          <div className="relative p-8 sm:p-12 text-center">            <Sparkles className="w-10 h-10 text-[#D4A24C] mx-auto mb-4" />            <h3 className="font-serif text-2xl sm:text-3xl text-white mb-3">              Ready to plan your perfect event?            </h3>            <p className="font-sans text-sm text-white/70 mb-8 max-w-xl mx-auto">              Let our expert team help you create an unforgettable culinary experience for your special occasion            </p>            <div className="flex flex-col sm:flex-row gap-4 justify-center items-center relative z-10">              <motion.a                href="/contact"                whileHover={{ scale: 1.05 }}                whileTap={{ scale: 0.95 }}                className="flex items-center gap-2 bg-gradient-to-r from-[#D4A24C] to-[#E6B65C] text-[#5A1F1F] px-8 py-4 rounded-full font-sans font-semibold shadow-xl shadow-[#D4A24C]/30 text-sm"              >                Get a Quote              </motion.a>              <motion.a                href="/menu"                whileHover={{ scale: 1.05 }}                whileTap={{ scale: 0.95 }}                className="flex items-center gap-2 bg-white/10 text-white px-8 py-4 rounded-full font-sans font-semibold hover:bg-white/20 transition-all text-sm"              >                View Our Menu              </motion.a>            </div>          </div>        </motion.div>      </div>    </section>  );}